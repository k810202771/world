<!DOCTYPE html>
<html>
<head lang="zh-CN">
    <meta charset="UTF-8">
    <title>我的标题</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" href="css/style.css"/>
    <link rel="stylesheet" href="icon-font/iconfont.css"/>
    <script src="js/Worm.js"></script>
</head>
<!--[if lte IE 9]>
<script>
    (function() {
        if (!
                    /*@cc_on!@*/
                        0) return;
        var e = "abbr, article, aside, audio, canvas, datalist, details, dialog, eventsource, figure, footer, header, hgroup, mark, menu, meter, nav, output, progress, section, time, video".split(', ');
        var i= e.length;
        while (i--){
            document.createElement(e[i])
        }
    })()
</script>
<![endif]-->
<body>











<!--页头-->
<herader id="herader">
    <div id="head_box" class="box">
        <div id="head_left"></div>
        <div id="head_right" class="iconfont">
            <a @mouseover="{{over}}" @mouseout="{{out}}">&#xe6e6;<div>微博</div></a>
            <a @mouseover="{{over}}" @mouseout="{{out}}">&#xe61e;<div>QQ</div></a>
            <a @mouseover="{{over}}" @mouseout="{{out}}">&#xe65d;<div>微信</div></a>
            <a @mouseover="{{over}}" @mouseout="{{out}}">&#xe652;<div>电话</div></a>
            <a @mouseover="{{over}}" @mouseout="{{out}}">&#xe678;<div>旺旺</div></a>
        </div>
    </div>
</herader>
<!--页面内容-->
<article>
    <div id="poster_bg" class="box">
        <div id="menu" class="box">
            <span>
                <a>{{menu1}}</a>
                <a>{{menu2}}</a>
                <a>{{menu3}}</a>
                <a>{{menu4}}</a>
                <a>{{menu5}}</a>
                <a>{{menu6}}</a>
            </span>
        </div>
    </div>
    <div class="box" id="content">
        <div id="content_left">
            <div id="posters">
                <ul id="Pindex">{{indexs}}</ul>
                <div id="posters_scroll">
                    {{posters}}
                </div>
            </div>
            <div>
                <ul class="list">
                    {{list}}
                </ul>
            </div>

        </div>
        <div id="content_right">
            <div class="head">{{img_url}}</div>
            <div class="content">
                <ul>
                    {{list}}
                </ul>
            </div>
        </div>
    </div>
    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
</article>


<!--页尾-->
<footer>

</footer>





</body>
<script>
    //导航菜单浮动
    window.onscroll = function(){
        var el = $("#menu");
        var top = (typeof window.pageYOffset != 'undefined'?window.pageYOffset:typeof document.compatMode != 'undefined' && document.compatMode != 'BackCompat'?document.documentElement.scrollTop:typeof document.body != 'undefined'?document.body.scrollTop:"");
        el.style.background = (ie()>8?top/55/2<=0.8?"rgba(255,255,255,"+top/55/2+")":"rgba(255,255,255,0.8)":top>55?"#fff":"");

        if(top >= 55){
            el.style.position = "fixed";
        }else{
            el.style.position = "";
        }
    };

    //分享按钮
    var share = new Worm({
        el: "#head_right",
        data: {
            over: function (e) {
                e.style.color = "#ff0000";
                $("div", e).style.display = "block";
            },
            out: function (e) {
                e.style.color = "";
                $("div", e).style.display = "";
            }
        }
    })

    //menu菜单导航
    var menu = new Worm({
        el:"#poster_bg",
        data:{
            menu1:"官网首页",
            menu2:"新闻资讯",
            menu3:"产品资料",
            menu4:"合作加盟",
            menu5:"联系我们",
            menu6:"关于我们"
        }
    });

    //海报
    AjaxText = function(e){
        var lunbo;
        var postersJSON=e;
        function handlE(json){
            var obj=JSON.parse(json),that={p:"",i:""};
            for(var o=0;o<obj.length;o++){
                that.p = that.p + "<a href=\""+obj[o].url+"\" style=\"background-image: url('" +obj[o].img+"')\"></a>"
                that.i = that.i+"<li @click='{{indexp}}'></li>"
            }
            return that;
        }
        var posters = new Worm({
            el:"#posters",
            data:{
                posters:handlE(postersJSON).p,
                indexs:handlE(postersJSON).i
            },load:function(){
                lunbo = new poster(2000,0,{f:$("#posters_scroll"),z:"a"},{f:$("#Pindex"),z:"li"})
            }
        });

        new Worm({
            el:"#Pindex",
            data:{
                indexp:function(e){
                    var el = $("li", e.parentNode);
                    for(var i=0;i<el.length;i++){
                        if(el[i]==e)lunbo.index(i);
                    }
                }
            },onclick:function(){

            }
        })
    };
    loadXMLDoc("data/hb.js","get",AjaxText);

    List = function(e){
        var listJSON=e;
        function handlE(json){
            var obj=JSON.parse(json),that="";
            for(var o=0;o<obj.length;o++){
                that=that+(o==0?"<li class='first'><a href='"+obj[o].url+"'><span class='list_left' style='background-image: url("+obj[o].img+")'></span><span class='list_content'><h1>"+obj[o].title+"</h1></span><span class='list_right v-title'>"+obj[o].time+"</span></a></li>":"<li><a href='"+obj[o].url+"'><span class='list_left'>"+obj[o].type+"</span><span class='list_content'>"+obj[o].title+"</span><span class='list_right v-title'>"+obj[o].time+"</span></a></li>");
            }
            return that;
        }
        var list = new Worm({
            el:".list",
            data:{
                list:handlE(listJSON)
            }
        })
    };
    loadXMLDoc("data/list.js","get",List);
    //手册
    manual = function(e){
        var listJSON=e;
        function handlE(json){
            var obj=JSON.parse(json),that="",img="",div="",eimg="",id,tail;
            for(var o=0;o<obj.length;o++){
                eimg="";
                id=obj[o].img.length;
                for(var i in obj[o].img){
                    tail=(i==id-1?"class='tail'":"");
                    eimg=eimg+"<div "+tail+" ><img src='"+obj[o].img[i]+"' /></div>";
                }
                img=(obj[o].img?"<div class='c-img c-img"+id+"' >"+eimg+"</div>":"");
                div="<div class='H-title'>"+obj[o].title+"</div><div class='v-title'>"+obj[o].text+"</div>" + img;
                that=that+"<li><a href='"+obj[o].url+"' target='_blank'>"+div+"</a></li>";
            }
            return that;
        }
        new Worm({
            el:"#content_right",
            data:{
                list:handlE(listJSON),
                img_url:"<img src=\"image/QRcode.jpg\" title=\"扫一扫手机访问！\"/>"
            }
        })
    };
    loadXMLDoc("data/text.js","get",manual);

    //多屏滚动
    function poster(time,index,el,sel,gd){
        var posternb = $(el.z,el.f);
        var node = $(sel.z,sel.f);
        var that = this;
        var times;
        that.index=function(e){
            clearTimeout(times);
            if(e!=null)index=e;
            for(var i=0;i<posternb.length;i++){
                if(i==index){
                    node[i].style.background = "#c28622";
                    el.f.style.marginLeft = "-"+(i*100)+"%";
                }else{
                    node[i].style.background = "";
                }
            }
            if(!gd)times = setTimeout(function(){that.index()},time);
            index<posternb.length-1?index++:index=0;
        };
        this.index();
    }
</script>
</html>